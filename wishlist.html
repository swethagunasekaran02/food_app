<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wishlist page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
       <link rel="stylesheet" href="css/ecommerce.css">
</head>

<body>
    <!-- navbar -->
     <div class="container-fluid d-flex justify-content-between border border-secondry nav-bar " style="background-color: rgb(227, 230, 229);">
      <div class=" logo">
       <img src="image/header-logo.svg" alt="" style="background-color:black;color: aliceblue;">
      </div>
      <div class=" d-flex">
         <div class="menu">
          <a href="index.html"><b>Home</b></a>
          <a href="wishlist.html"><b>wishlist</b></a>
          <a href="ShopCart.html"><b>AddToCart</b></a>
        </div>
        <div class=" p-2 m-2 icon">
          <i class="fa fa-heart-o fs-5 text position-relative fs-4 "id="wishdetails" aria-hidden="true"></i><span id="wishcount">0</span>
        </div>
         <div class=" p-2 m-2 icon">
          <i class="fa fa-shopping-bag position-relative fs-4 text order-btn" id="details"aria-hidden="true"></i>
          <span class="cartCount">0</span>
        </div>
      </div>
  </div>
  <!-- table -->
 <div style="text-align: center;"><h2>Cart Summary</h2>
  <div class="container mt-4">
    <table class="table table-bordered">
      <thead>
      </thead>
      <tbody id="wishlistitems">
      </tbody>
    </table>
</div>
</div><br>
 

<!-- footer -->

<div class=" container-fluid d-flex justify-content-evenly footer-box footer-clr">
    <div class="footer">
        <div class="menu-bar">
            <img src="images/6706104d4f29e916e4cae4b8_CLEAN-p-500.png" alt="">
         </div>
         <div class="container footer-design">
            <div class="footer-icon">
                <i class="fa fa-youtube-play" aria-hidden="true"></i>
            </div>
            <div class="footer-icon">
                <i class="fa fa-twitter" aria-hidden="true"></i>
            </div>
            <div class="footer-icon">
                <i class="fa fa-facebook" aria-hidden="true"></i>
            </div>
         </div>
         <p class="EF-TXT">Urban Jungle</p>
         <p class="EF-TXT">Exceptional Results</p>
    </div>
    <div class="footer-body">
        <ul>
            <li>Main</li>
            <li>Home</li>
            <li>About</li>
            <li>Services</li>
            <li>Blog</li>
        </ul>

    </div>
    <div class="footer-body">
        <ul>
            <li>PAGES</li>
            <li>Contact</li>
            <li>Terms & Conditions</li>
            <li>Privacy Policy</li>
            
        </ul>
    </div>
    <div class="footer-body">
        <ul>
            <li>UTILITIES</li>
            <li>Style Guide</li>
            <li>Instructions</li>
            <li>Licenses</li>
            <li>Changelog</li>
            
        </ul>
    </div>
</div>

<div class="container-fluid d-flex justify-content-evenly right-reserved">
    <div class="footer-font">
        @2024 Plants.All Rights Reserved.
    </div>
    <div  class="footer-font">
        Powered By Webflow Built By Rick  Mummery
    </div>
</div>

  <script>
  const products={
  1:{dataid:"1",name:"product1",price:"95",image:"image/web2.avif",},
  2:{dataid:"2",name:"product2",price:"90",image:"image/web3.avif"},
  3:{dataid:"3",name:"product3",price:"80",image:"image/web13.avif"},
  4:{dataid:"4",name:"product4",price:"96",image:"image/web10.avif"},
  5:{dataid:"5",name:"product5",price:"78",image:"image/web8.avif"},
  6:{dataid:"6",name:"product6",price:"89",image:"image/web 12.avif"},
}

        const storedWishlist = new Set(JSON.parse(localStorage.getItem("wishlist") || "[]"));
const container = document.getElementById("wishlistitems");

let wishlistitems = "";


if (storedWishlist.size === 0) {
    wishlistitems = "<p>Wishlist is empty.</p>";
} else {
    wishlistitems = `
    <table border="1" cellpadding="10" cellspacing="0">
        <thead>
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Price (₹)</th>
            
            </tr>
        </thead>
        <tbody>
    `;
       let tot=0;
    storedWishlist.forEach(id => {
        const item = products[id];
        if (item) {
            wishlistitems += `
            <tr style="tetx-align-center;">
                <td><img src="${item.image}" width="100" height="100" alt="${item.name}"></td>
                <td>${item.name}</td>
                <td>₹${item.price}</td>
            </tr>
            `;
            tot +=parseFloat(item.price);
        }
    });

    wishlistitems += `
    <tr>
        <td colspan="2" class="text-end">Total</td>
        <td style="text-align:center;">${tot}</td>
        </tr>
        </tbody>
    </table>
    `;
}

container.innerHTML = wishlistitems;
 
    function addToCart(dataid) {
        if (!cart[dataid]) {
            cart[dataid] = { ...products[dataid], qty: 1 };
        } else {
        cart[dataid].qty++;
        }
             updatebadge();
             saveToLocalStorage();
             
      }

    function loadCart() {
      const cart = JSON.parse(localStorage.getItem("cart")) || {};
      const tbody = document.getElementById("cart-table-body");
      let grandTotal = 0;

      for (const id in cart) {
        const item = cart[id];
        const total = item.qty * parseFloat(item.price);
        grandTotal += total;

        const row = document.createElement("tr");
        row.innerHTML = `
          <td><img src="${item.image}" alt="${item.name}" heigth="100px"class="product-img" /></td>
            <td>${item.qty}</td>
          <td>₹${item.price}</td>
          <td>₹${total.toFixed(2)}</td>
        `;        tbody.appendChild(row);
      }

      document.getElementById("grand-total").innerText = `Total: ₹${grandTotal.toFixed(2)}`;
    }

    function payNow() {
      alert("Payment successful! Thank you.");
      localStorage.removeItem("cart");
      window.location.href = "shopCart.html"; 
    }

    window.onload = loadCart;

    function toggleWishlist(dataid) {
  const icon = document.querySelector(`.product-card[dataid="${dataid}"] .wishlist-icon i`);

  if (wishlist.has(dataid)) {
    wishlist.delete(dataid);
    icon.classList.remove("fa-heart");
    icon.classList.add("fa-heart-o");
  } else {
    wishlist.add(dataid);
    icon.classList.remove("fa-heart-o");
    icon.classList.add("fa-heart");
   }

  updatebadge();
  saveToLocalStorage();
}

     function updatebadge(){
        document.getElementById("wishcount").innerText = wishlist.size;
         let totalQty = 0;
    for (const id in cart) {
        totalQty += cart[id].qty;
    }
    document.querySelector(".cartCount").innerText = totalQty;
}

function saveToLocalStorage() {
  localStorage.setItem("wishlist", JSON.stringify([...wishlist]));
  localStorage.setItem("cart", JSON.stringify(cart));
  localStorage.setItem("totalAddClicks",totalAddClicks);
}

function loadFromLocalStorage() {
  const storedWishlist = localStorage.getItem("wishlist");
  const storedClicks = localStorage.getItem("totalAddClicks");
  if (storedWishlist) {
    wishlist = new Set(JSON.parse(storedWishlist));
    wishlist.forEach(dataid => {
      const icon = document.querySelector(`.product-card[dataid="${dataid}"] .wishlist-icon`);
      if (icon) {
        icon.classList.add('active');
      }
    });
  }

  const storedCart = localStorage.getItem("cart");
  if (storedCart) {
    cart = JSON.parse(storedCart);
  }
  if(storedClicks){
    totalAddClicks=parseInt(storedClicks);
  }

  updatebadge();
}

function closecart() {
  const cartSummary = document.getElementById("cart-summary");
  if (cartSummary) {
    cartSummary.style.display = "none";
  }
}

window.onload = function () {
  loadFromLocalStorage();
document.getElementById("details").addEventListener("click",()=>{
  window.location.href="ShopCart.html";
  
});
document.getElementById("wishdetails").addEventListener("click",()=>{
  window.location.href="wishlist.html";
})
}
  

</script>
</body>
</html>